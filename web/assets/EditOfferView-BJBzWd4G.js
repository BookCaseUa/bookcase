import{_ as k,B as w,q as S,r as v,z as D,E as I,h as L,p as U,j as u,e as s,o as x,d as o,a as T,t as p,D as j,i as V}from"./index-B0bI5t4i.js";const W={class:"titulo-editar"},M={__name:"EditOfferView",setup(R){const O=I(),m=L(),_=w(),E=S(),n=v({id:"",edition_book_name:"",condition:"",language:"",status:"",price:0,comment:""}),b=v(""),f=v({});D(async()=>{var l;const e=O.params.id,t=(await _.getOffers()).data.find(c=>c.id===e);if(!t)return m.push("/mis-ofertas");const r={id:t.id,edition_book_name:t.data.edition_book_name,condition:y(t.data.condition),language:t.data.language,status:B(t.data.status),price:t.data.price,comment:t.data.comment};n.value={...r},f.value={...r};const d=(await E.getEditions()).data.find(c=>c.id===t.data.edition_id);(l=d==null?void 0:d.data)!=null&&l.image&&(b.value=d.data.image)});const C=async()=>{const{id:e,price:a,comment:t,language:r,condition:d}=n.value,l={};a!==f.value.price&&(l.price=a),t!==f.value.comment&&(l.comment=t),await _.updateOffer(e,null,l.price!=null||l.comment!=null?r:null,l.price!=null||l.comment!=null?A(d):null,l.price!=null?a:null,l.comment!=null?t:null),m.push("/mis-ofertas")},y=e=>({NEW:"Nuevo","LIKE NEW":"Seminuevo",GOOD:"Bueno",ACCEPTABLE:"Aceptable",BAD:"Malo"})[e]||e,A=e=>({Nuevo:"NEW",Seminuevo:"LIKE NEW",Bueno:"GOOD",Aceptable:"ACCEPTABLE",Malo:"BAD"})[e]||e,B=e=>({ACTIVE:"Activa","IN CART":"En carrito",SOLD:"Vendida"})[e]||e;return(e,a)=>{const t=s("v-row"),r=s("v-img"),d=s("v-col"),l=s("v-text-field"),c=s("v-textarea"),g=s("v-btn"),N=s("v-card"),$=s("v-container");return x(),U($,null,{default:u(()=>[o(N,{class:"pa-6 mx-auto my-8","max-width":"900"},{default:u(()=>[o(t,{justify:"center"},{default:u(()=>[T("h2",W,p(e.$t("editarOferta.tituloVista")),1)]),_:1}),o(t,{class:"mt-4",justify:"center"},{default:u(()=>[o(d,{cols:"12",md:"4",class:"d-flex justify-center align-center"},{default:u(()=>[o(r,{src:b.value,class:"imagen-libro"},null,8,["src"])]),_:1}),o(d,{cols:"12",md:"8"},{default:u(()=>[o(l,{modelValue:n.value.edition_book_name,"onUpdate:modelValue":a[0]||(a[0]=i=>n.value.edition_book_name=i),label:e.$t("editarOferta.titulo"),readonly:""},null,8,["modelValue","label"]),o(l,{modelValue:n.value.condition,"onUpdate:modelValue":a[1]||(a[1]=i=>n.value.condition=i),label:e.$t("editarOferta.condicion"),readonly:""},null,8,["modelValue","label"]),o(l,{modelValue:n.value.language,"onUpdate:modelValue":a[2]||(a[2]=i=>n.value.language=i),label:e.$t("editarOferta.idioma"),readonly:""},null,8,["modelValue","label"]),o(t,null,{default:u(()=>[o(d,{cols:"6"},{default:u(()=>[o(l,{modelValue:n.value.price,"onUpdate:modelValue":a[3]||(a[3]=i=>n.value.price=i),label:e.$t("editarOferta.precio"),type:"number"},null,8,["modelValue","label"])]),_:1}),o(d,{cols:"6"},{default:u(()=>[o(l,{modelValue:n.value.status,"onUpdate:modelValue":a[4]||(a[4]=i=>n.value.status=i),label:e.$t("editarOferta.estado"),readonly:""},null,8,["modelValue","label"])]),_:1})]),_:1}),o(c,{modelValue:n.value.comment,"onUpdate:modelValue":a[5]||(a[5]=i=>n.value.comment=i),label:e.$t("editarOferta.comentario")},null,8,["modelValue","label"])]),_:1})]),_:1}),o(t,{class:"botones"},{default:u(()=>[o(g,{class:"boton-cancelar",variant:"text",onClick:a[6]||(a[6]=i=>j(m).push("/mis-ofertas"))},{default:u(()=>[V(p(e.$t("editarOferta.cancelar")),1)]),_:1}),o(g,{class:"boton-guardar",variant:"text",onClick:C},{default:u(()=>[V(p(e.$t("editarOferta.guardar")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}},K=k(M,[["__scopeId","data-v-993e2918"]]);export{K as default};
