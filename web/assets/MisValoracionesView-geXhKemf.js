import{_ as U,Y as F,u as x,r as g,m as E,z as I,p as _,j as s,e as l,h as j,o as u,a as o,d as r,t,i,c as z,F as O,x as R}from"./index-B0bI5t4i.js";const T={class:"titulo"},Y={class:"flip-card-inner"},q={class:"flip-card-front"},A={class:"info-line"},G={class:"info-line"},H={class:"info-line"},J={class:"info-line"},K={class:"flip-card-back"},m=6,Q={__name:"MisValoracionesView",setup(W){const b=F(),y=x(),c=g([]),h=j(),v=g(1);E(()=>{const e=(v.value-1)*m,n=e+m;return console.log("Mostrando desde",e,"hasta",n),c.value.slice(e,n)}),I(async()=>{const e=y.id;if(!e){console.warn("No hay usuario logueado.");return}const n=await b.getPurchasesFromUser(e);console.log("Pedidos por usuario actual: ",n),n.result==="SUCCESS"&&(c.value=n.data.filter(d=>typeof d.user_rating=="number"&&d.user_rating>0||typeof d.book_rating=="number"&&d.book_rating>0),v.value=1,console.log("Valoraciones filtradas:",c.value))});function V(e){return e?e.seconds?new Date(e.seconds*1e3).toLocaleDateString():new Date(e).toLocaleDateString():null}function k(e){h.push(`/perfil/${e.seller_id}`)}function $(e){console.log("Ver pedido:",e.id)}return(e,n)=>{const d=l("v-alert"),S=l("v-card-title"),w=l("v-card-subtitle"),p=l("v-rating"),C=l("v-card-text"),f=l("v-btn"),P=l("v-card"),D=l("v-col"),M=l("v-row"),B=l("v-pagination"),L=l("v-container");return u(),_(L,{class:"py-6"},{default:s(()=>[o("h1",T,t(e.$t("valoraciones.titulo")),1),c.value.length===0?(u(),_(d,{key:0,class:"custom-alert",border:"start",density:"comfortable",variant:"flat"},{default:s(()=>[i(t(e.$t("valoraciones.sinValoraciones")),1)]),_:1})):(u(),_(M,{key:1},{default:s(()=>[(u(!0),z(O,null,R(c.value,a=>(u(),_(D,{cols:"12",sm:"6",md:"4",key:a.id},{default:s(()=>[r(P,{class:"mb-4 flip-card texto"},{default:s(()=>[o("div",Y,[o("div",q,[r(S,{class:"text-h6"},{default:s(()=>[i(t(e.$t("valoraciones.pedido"))+": "+t(a.id),1)]),_:2},1024),r(w,null,{default:s(()=>[i(t(e.$t("valoraciones.fecha"))+": "+t(V(a.delivery_date||a.buying_date)||"Sin fecha"),1)]),_:2},1024),r(C,null,{default:s(()=>[o("div",A,[o("strong",null,t(e.$t("valoraciones.vendedor"))+":",1),i(" "+t(a.seller_name),1)]),o("div",G,[o("strong",null,t(e.$t("valoraciones.valoracionVendedor"))+":",1),n[1]||(n[1]=o("br",null,null,-1)),r(p,{"model-value":a.user_rating||0,color:"amber",readonly:"",density:"compact","half-increments":""},null,8,["model-value"])]),o("div",H,[o("strong",null,t(e.$t("valoraciones.valoracionLibro"))+":",1),n[2]||(n[2]=o("br",null,null,-1)),r(p,{"model-value":a.book_rating||0,color:"amber",readonly:"",density:"compact","half-increments":""},null,8,["model-value"])]),o("div",J,[o("strong",null,t(e.$t("valoraciones.comentario"))+":",1),i(" "+t(a.comment||"Sin comentario"),1)])]),_:2},1024)]),o("div",K,[r(f,{variant:"text",color:"primary",class:"mb-2",onClick:N=>k(a)},{default:s(()=>[i(t(e.$t("valoraciones.verPerfilVendedor")),1)]),_:2},1032,["onClick"]),r(f,{variant:"text",color:"secondary",onClick:N=>$(a)},{default:s(()=>[i(t(e.$t("valoraciones.verDetallesPedido")),1)]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})),r(B,{modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=a=>v.value=a),length:Math.ceil(c.value.length/m),rounded:"",class:"mt-4 pagination"},null,8,["modelValue","length"])]),_:1})}}},Z=U(Q,[["__scopeId","data-v-e4a78edd"]]);export{Z as default};
