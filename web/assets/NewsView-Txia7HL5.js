import{_ as B,Z as L,q as N,l as U,r as h,z as D,m as O,p as y,j as s,e as c,h as F,o as p,a as n,d as l,c as V,b as j,i as _,t as r,F as I,x as M}from"./index-B0bI5t4i.js";const R={class:"text-h4 mb-6 text-center"},T=["onClick"],q=["src"],x={class:"overlay"},z={class:"title"},A={class:"subtitle"},P={class:"subtitle"},Z={class:"subtitle"},G={class:"year"},H={key:0,class:"text-center mt-10 no-books-message"},J={__name:"NewsView",setup(K){const C=F(),$=L(),S=N(),{t:Q}=U(),k=h([]),g=h([]),a=h({title:"",author:"",genre:"",year:null});D(async()=>{const o=await $.getBooks(),e=await S.getEditions();o.result==="SUCCESS"&&(k.value=o.data),e.result==="SUCCESS"&&(g.value=e.data)});function E(o){C.push(`/infoEdicion/${o}`)}function b(o){var e;return((e=k.value.find(d=>d.id===o))==null?void 0:e.data)||{}}const w=O(()=>g.value.filter(o=>{var v,t,f;const e=b(o.data.book_id),d=!a.value.title||((v=e.title)==null?void 0:v.toLowerCase().includes(a.value.title.toLowerCase())),i=!a.value.author||((t=e.author)==null?void 0:t.toLowerCase().includes(a.value.author.toLowerCase())),u=!a.value.genre||((f=e.genre)==null?void 0:f.toLowerCase().includes(a.value.genre.toLowerCase())),m=!a.value.year||o.data.year==a.value.year;return o.data.image&&d&&i&&u&&m}).slice(0,12));return(o,e)=>{const d=c("v-icon"),i=c("v-text-field"),u=c("v-col"),m=c("v-row"),v=c("v-container");return p(),y(v,{class:"py-10 novedades-container"},{default:s(()=>[n("h1",R,[l(d,{class:"novedades-icon mr-2"},{default:s(()=>e[4]||(e[4]=[_("mdi-book-open-page-variant")])),_:1}),_(" "+r(o.$t("home.librosAnadidosRecientemente")),1)]),l(m,{class:"mb-8",justify:"center"},{default:s(()=>[l(u,{cols:"12",md:"3"},{default:s(()=>[l(i,{modelValue:a.value.title,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.title=t),label:o.$t("home.titulo"),clearable:""},null,8,["modelValue","label"])]),_:1}),l(u,{cols:"12",md:"3"},{default:s(()=>[l(i,{modelValue:a.value.author,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.author=t),label:o.$t("home.autor"),clearable:""},null,8,["modelValue","label"])]),_:1}),l(u,{cols:"12",md:"3"},{default:s(()=>[l(i,{modelValue:a.value.genre,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.genre=t),label:o.$t("home.genero"),clearable:""},null,8,["modelValue","label"])]),_:1}),l(u,{cols:"12",md:"3"},{default:s(()=>[l(i,{modelValue:a.value.year,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.year=t),modelModifiers:{number:!0},label:o.$t("home.anoPublicacion"),type:"number",clearable:""},null,8,["modelValue","label"])]),_:1})]),_:1}),l(m,null,{default:s(()=>[(p(!0),V(I,null,M(w.value,t=>(p(),y(u,{key:t.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[n("div",{class:"card-wrapper",onClick:f=>E(t.id)},[n("img",{src:t.data.image||"https://placehold.co/400x600",class:"cover-image"},null,8,q),n("div",x,[n("p",z,r(b(t.data.book_id).title||"Sin título"),1),n("p",A,r(b(t.data.book_id).author||o.$t("home.autorDesconocido")),1),n("p",P,r(t.data.editorial||o.$t("wishlist.editorialDesconocida")),1),n("p",Z,r(o.$t(`wishlist.tipos.${t.data.type||"Otro"}`)),1),n("p",G,r(o.$t("home.publicado"))+": "+r(t.data.year||o.$t("wishlist.añoDesconocido")),1)])],8,T)]),_:2},1024))),128))]),_:1}),w.value.length===0?(p(),V("div",H,[l(d,{color:"red",class:"mb-2"},{default:s(()=>e[5]||(e[5]=[_("mdi-alert-circle-outline")])),_:1}),e[6]||(e[6]=n("br",null,null,-1)),_(" "+r(o.$t("home.noLibrosConFiltros")),1)])):j("",!0)]),_:1})}}},X=B(J,[["__scopeId","data-v-5a971df7"]]);export{X as default};
