import{_ as S,k as T,r as U,l as j,m as k,z,p as C,j as r,e as l,o as h,d as i,a as o,b as $,c as A,i as x,t as n,n as E}from"./index-B0bI5t4i.js";const I={class:"color-proyecto"},D={class:"no-datos"},M={key:1,class:"no-users"},Q={__name:"AdminUsersView",setup(R){const f=T(),c=U(""),V=U(1),{t}=j(),L=k(()=>[{title:t("usuarios.nombre"),key:"nickname",align:"center",sortable:!0},{title:t("usuarios.email"),key:"email",align:"center",sortable:!0},{title:t("usuarios.pais"),key:"pais",align:"center",sortable:!0},{title:t("usuarios.compras"),key:"compras",align:"center",sortable:!0},{title:t("usuarios.ventas"),key:"ventas",align:"center",sortable:!0},{title:t("usuarios.rol"),key:"type",align:"center",sortable:!1}]),B=k(()=>[{label:t("usuarios.admin"),value:"admin"},{label:t("usuarios.usuario"),value:"user"},{label:t("usuarios.profesional"),value:"profesional"},{label:t("usuarios.libreria"),value:"bookstore"}]),N=async a=>{try{await f.editUserType(a.id,a.data.type)}catch(e){console.error("Error al cambiar tipo:",e)}},g=k(()=>{const a=c.value.toLowerCase().trim();return f.users.map(e=>{var u,d,p,m,v,_,y,b;return{id:e.id,data:e.data,nickname:((u=e.data)==null?void 0:u.nickname)||((d=e.data)==null?void 0:d.name)||"",email:((p=e.data)==null?void 0:p.email)||"",pais:((v=(m=e.data)==null?void 0:m.direccion)==null?void 0:v.pais)||"-",compras:((_=e.data)==null?void 0:_.compras)??"-",ventas:((y=e.data)==null?void 0:y.ventas)??"-",type:((b=e.data)==null?void 0:b.type)||""}}).filter(e=>e.email.toLowerCase().includes(a)||e.nickname.toLowerCase().includes(a))});return z(async()=>{await f.fetchUsers()}),(a,e)=>{const u=l("v-icon"),d=l("v-text-field"),p=l("v-select"),m=l("v-data-table"),v=l("v-card"),_=l("v-col"),y=l("v-row"),b=l("v-container");return h(),C(b,{class:"user-list-container"},{default:r(()=>[i(y,{justify:"center"},{default:r(()=>[i(_,{cols:"12",md:"12"},{default:r(()=>[i(v,{class:"user-list-vcard",elevation:"6"},{default:r(()=>[o("h1",I,[i(u,{class:"mr-2"},{default:r(()=>e[2]||(e[2]=[x("mdi-account-group")])),_:1}),x(" "+n(a.$t("usuarios.titulo")),1)]),i(d,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),placeholder:a.$t("usuarios.buscar"),outlined:"",clearable:"","hide-details":"","prepend-inner-icon":"mdi-magnify","onClick:clear":e[1]||(e[1]=()=>{c.value="",V.value=1})},null,8,["modelValue","placeholder"]),g.value.length>0?(h(),C(m,{key:0,headers:L.value,items:g.value,"items-per-page":5,"items-per-page-options":[5,10,20,50,-1],"items-per-page-text":a.$t("tabla.elementosPorPagina"),"items-per-page-all-text":a.$t("tabla.todos"),page:V.value,class:"mt-4"},{item:r(({item:s,index:P})=>[o("tr",{class:E(P%2===0?"fila-par":"fila-impar")},[o("td",null,n(s.nickname),1),o("td",null,n(s.email),1),o("td",null,n(s.pais),1),o("td",null,n(s.compras),1),o("td",null,n(s.ventas),1),o("td",null,[i(p,{modelValue:s.data.type,"onUpdate:modelValue":[w=>s.data.type=w,w=>N(s)],items:B.value,"item-title":"label","item-value":"value",dense:"","hide-details":"",class:"select-rol",density:"compact"},null,8,["modelValue","onUpdate:modelValue","items"])])],2)]),"no-data":r(()=>[o("div",D,n(a.$t("usuarios.sinResultados")),1)]),_:1},8,["headers","items","items-per-page-text","items-per-page-all-text","page"])):$("",!0),g.value.length===0?(h(),A("p",M,n(a.$t("usuarios.sinUsuarios")),1)):$("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}},F=S(Q,[["__scopeId","data-v-c1d794d7"]]);export{F as default};
