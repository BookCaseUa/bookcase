import{_ as C,Y as I,u as x,l as $,r as B,a4 as O,m as P,z as U,p as h,j as i,e as n,o as y,d as p,a as c,c as A,i as w,t as u,n as E}from"./index-B0bI5t4i.js";const L={class:"text-h5 font-weight-bold text-center mb-6 color-proyecto"},N={key:1,class:"no-orders"},j={__name:"AdminOrdersView",setup(z){const f=I(),k=x(),{t:m}=$(),_=B(""),v=O({}),S=P(()=>[{title:m("adminPedidos.id"),key:"id",align:"center",sortable:!0},{title:m("adminPedidos.usuario"),key:"user",align:"center",sortable:!0},{title:m("adminPedidos.estado"),key:"status",align:"center",sortable:!0},{title:m("adminPedidos.fecha"),key:"rawDate",align:"center",sortable:!0}]),b=P(()=>{const t=_.value.toLowerCase().trim();return(f.orders||[]).map(e=>{const o=v[e.buyer_id]||"Usuario";let a;e.status==="PAID"?a=e.buying_date:e.status==="SHIPPED"?a=e.shipment_date:e.status==="ARRIVED"&&(a=e.delivery_date);const r=a?a.seconds:0,d=a?new Date(a.seconds*1e3).toLocaleDateString("es-ES"):"-",g=m(`adminPedidos.estados.${e.status}`)||e.status;return{...e,user:o,date:d,rawDate:r,translatedStatus:g}}).filter(e=>{var r,d;const o=((r=e.user)==null?void 0:r.toLowerCase())||"",a=((d=e.status)==null?void 0:d.toLowerCase())||"";return o.includes(t)||a.includes(t)})});return U(async()=>{var t;await f.fetchOrders();for(const s of f.orders){const e=s.buyer_id;if(e&&!v[e]){const o=await k.fetchUserById(e);v[e]=((t=o==null?void 0:o.data)==null?void 0:t.nickname)||"Usuario"}}}),(t,s)=>{const e=n("v-icon"),o=n("v-text-field"),a=n("v-data-table"),r=n("v-card"),d=n("v-col"),g=n("v-row"),D=n("v-container");return y(),h(D,{class:"order-list-container"},{default:i(()=>[p(g,{justify:"center"},{default:i(()=>[p(d,{cols:"12",md:"12"},{default:i(()=>[p(r,{class:"order-list-vcard",elevation:"6"},{default:i(()=>[c("h2",L,[p(e,{class:"mr-2"},{default:i(()=>s[2]||(s[2]=[w("mdi-package-variant-closed")])),_:1}),w(" "+u(t.$t("adminPedidos.titulo")),1)]),p(o,{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=l=>_.value=l),placeholder:t.$t("adminPedidos.buscar"),outlined:"",clearable:"","hide-details":"","prepend-inner-icon":"mdi-magnify","onClick:clear":s[1]||(s[1]=()=>{_.value="",t.currentPage=1})},null,8,["modelValue","placeholder"]),b.value.length>0?(y(),h(a,{key:0,headers:S.value,items:b.value,"items-per-page":5,page:t.currentPage,"items-per-page-options":[5,10,20,50,-1],"items-per-page-text":t.$t("tabla.elementosPorPagina"),"items-per-page-all-text":t.$t("tabla.todos"),class:"mt-4"},{item:i(({item:l,index:V})=>[c("tr",{class:E(V%2===0?"fila-par":"fila-impar")},[c("td",null,u(l.id),1),c("td",null,u(l.user),1),c("td",null,u(l.translatedStatus),1),c("td",null,u(l.date),1)],2)]),_:1},8,["headers","items","page","items-per-page-text","items-per-page-all-text"])):(y(),A("p",N,u(t.$t("adminPedidos.sinPedidos")),1))]),_:1})]),_:1})]),_:1})]),_:1})}}},R=C(j,[["__scopeId","data-v-1efb2f7a"]]);export{R as default};
